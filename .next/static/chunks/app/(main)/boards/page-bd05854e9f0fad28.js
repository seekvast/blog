(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[519],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:d,...l},f)=>(0,n.createElement)("svg",{ref:f,...s,width:i,height:i,stroke:r,strokeWidth:c?24*Number(o)/Number(i):o,className:["lucide",`lucide-${a(e)}`,u].join(" "),...l},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9077:function(e,t,r){Promise.resolve().then(r.bind(r,9375))},9375:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(7437),s=r(2265),a=r(1396),i=r.n(a),o=r(2749),c=r(5808),u=r(575),d=r(3277),l=r(3523),f=r(6264),m=r(4971);function h(){let{data:e}=(0,o.useSession)(),[t,r]=(0,s.useState)(!0),[a,h]=(0,s.useState)([]),[x,p]=(0,s.useState)(1),[v,g]=(0,s.useState)(1),[y,b]=(0,s.useState)("recommended"),[N,j]=(0,s.useState)(null),w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{r(!0);let n=new URLSearchParams({page:String(e),per_page:"10",...N&&{category_id:String(N)}}).toString(),s=await m.d.get("/api/boards?".concat(n));0===s.code&&(h(e=>t?s.data.items:[...e,...s.data.items]),p(s.data.current_page),g(s.data.last_page))}catch(e){console.error("Failed to fetch boards:",e)}finally{r(!1)}};return(0,s.useEffect)(()=>{w(1,!0)},[N,y]),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)("div",{className:"mx-auto w-full px-8",children:(0,n.jsxs)("div",{className:"flex h-[60px] items-center justify-between border-b border-[#EAEAEA]",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,n.jsx)(u.z,{variant:"ghost",className:"h-8 px-1 font-medium ".concat("recommended"===y?"text-primary hover:bg-transparent hover:text-primary":"text-muted-foreground hover:bg-transparent hover:text-foreground"),onClick:()=>b("recommended"),children:"推薦"}),(0,n.jsx)(u.z,{variant:"ghost",className:"h-8 px-1 font-medium ".concat("joined"===y?"text-primary hover:bg-transparent hover:text-primary":"text-muted-foreground hover:bg-transparent hover:text-foreground"),onClick:()=>b("joined"),children:"已加入"})]}),(0,n.jsxs)(u.z,{variant:"ghost",size:"sm",className:"h-8 space-x-2 text-muted-foreground hover:bg-transparent hover:text-foreground",onClick:()=>j(null),children:["全部",(0,n.jsx)(l.Z,{className:"h-4 w-4"})]})]})})}),(0,n.jsxs)("div",{className:"mx-auto w-full px-8",children:[t&&0===a.length?(0,n.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,n.jsx)(f.Z,{className:"h-8 w-8 animate-spin text-primary"})}):(0,n.jsx)("div",{className:"divide-y",children:a.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)(c.qE,{className:"h-12 w-12",children:[(0,n.jsx)(c.F$,{src:e.avatar}),(0,n.jsx)(c.Q5,{children:e.name[0]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(i(),{href:"/boards/".concat(e.slug),className:"text-lg font-medium hover:text-primary",children:e.name}),1===e.is_nsfw&&(0,n.jsx)(d.C,{variant:"destructive",className:"h-5",children:"成人"}),1===e.visibility&&(0,n.jsx)(d.C,{variant:"secondary",className:"h-5",children:"私密"})]}),(0,n.jsx)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:e.category&&(0,n.jsx)("span",{children:e.category.name})}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-1",children:e.desc})]})]}),(0,n.jsx)(u.z,{variant:"outline",size:"sm",children:"加入"})]},e.id))}),!t&&x<v&&(0,n.jsx)("div",{className:"flex justify-center py-8",children:(0,n.jsx)(u.z,{variant:"outline",onClick:()=>{x<v&&w(x+1,!1)},className:"w-[200px]",children:"加載更多"})})]})]})}},5808:function(e,t,r){"use strict";r.d(t,{F$:function(){return c},Q5:function(){return u},qE:function(){return o}});var n=r(7437),s=r(2265),a=r(6694),i=r(2169);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});o.displayName=a.fC.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...s})});c.displayName=a.Ee.displayName;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});u.displayName=a.NY.displayName},3277:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(7437);r(2265);var s=r(6061),a=r(2169);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),s=r(2265),a=r(7256),i=r(6061),o=r(2169);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:u=!1,...d}=e,l=u?a.g7:"button";return(0,n.jsx)(l,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...d})});u.displayName="Button"},4971:function(e,t,r){"use strict";r.d(t,{d:function(){return i}});var n=r(2749);class s extends Error{constructor(e,t,r){super(e),this.status=t,this.code=r,this.name="RequestError"}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{auth:r=!0,raw:a=!1,...i}=t,o=e.startsWith("http")?e:"".concat("http://106.55.228.122:8200").concat(e);if(r){let e=await (0,n.getSession)();(null==e?void 0:e.accessToken)&&(i.headers={...i.headers,Authorization:"Bearer ".concat(e.accessToken)})}i.headers={Accept:"application/json",...!(i.body instanceof FormData)&&{"Content-Type":"application/json"},...i.headers};try{let e=await fetch(o,i);if(a)return e;let t=await e.json();if(t.code>0)throw new s("string"==typeof t.message?t.message:JSON.stringify(t.message),e.status,t.code);if(!e.ok)throw new s(t.message||e.statusText,e.status,t.code);if(401===t.code)throw await (0,n.signOut)({redirect:!0}),new s("登录已过期，请重新登录",401);return t}catch(e){if(e instanceof s)throw e;throw new s(e.message)}}let i={get:async(e,t)=>a(e,{method:"GET",...t}),async post(e,t,r){let n={},s=JSON.stringify(t);return t instanceof FormData?s=t:n["Content-Type"]="application/json",a(e,{method:"POST",body:s,headers:n,...r})},put:async(e,t,r)=>a(e,{method:"PUT",body:JSON.stringify(t),...r}),delete:async(e,t)=>a(e,{method:"DELETE",...t})}},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(7042),s=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},6989:function(e,t,r){"use strict";r.d(t,{b:function(){return i},k:function(){return a}});var n=r(2265),s=r(7437);function a(e,t){let r=n.createContext(t),a=e=>{let{children:t,...a}=e,i=n.useMemo(()=>a,Object.values(a));return(0,s.jsx)(r.Provider,{value:i,children:t})};return a.displayName=e+"Provider",[a,function(s){let a=n.useContext(r);if(a)return a;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function i(e,t=[]){let r=[],a=()=>{let t=r.map(e=>n.createContext(e));return function(r){let s=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return a.scopeName=e,[function(t,a){let i=n.createContext(a),o=r.length;r=[...r,a];let c=t=>{let{scope:r,children:a,...c}=t,u=r?.[e]?.[o]||i,d=n.useMemo(()=>c,Object.values(c));return(0,s.jsx)(u.Provider,{value:d,children:a})};return c.displayName=t+"Provider",[c,function(r,s){let c=s?.[e]?.[o]||i,u=n.useContext(c);if(u)return u;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:n})=>{let s=r(e)[`__scope${n}`];return{...t,...s}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(a,...t)]}},6459:function(e,t,r){"use strict";r.d(t,{W:function(){return s}});var n=r(2265);function s(e){let t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>t.current?.(...e),[])}},5655:function(e,t,r){"use strict";r.d(t,{b:function(){return s}});var n=r(2265),s=globalThis?.document?n.useLayoutEffect:()=>{}}},function(e){e.O(0,[461,749,440,971,938,744],function(){return e(e.s=9077)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2871:function(e,t,s){Promise.resolve().then(s.bind(s,6615))},6615:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(7437),n=s(2265),a=s(575),i=s(5808),c=s(3523),o=s(4811),d=s(7810),l=s(2882),u=s(4971),f=s(847),m=s(5863);function x(){let[e,t]=n.useState([]),[s,x]=n.useState(!0),[h,p]=n.useState(1),[g,v]=n.useState(!0),j=n.useCallback(async()=>{try{let e=await u.d.get("/api/discussions?page=".concat(h,"&per_page=10"));0===e.code&&(t(t=>[...t,...e.data.items]),v(e.data.current_page<e.data.last_page))}catch(e){console.error("Failed to fetch discussions:",e)}finally{x(!1)}},[h]);return n.useEffect(()=>{j()},[j]),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"bg-white",children:(0,r.jsx)("div",{className:"mx-auto w-[808px] px-8",children:(0,r.jsxs)("div",{className:"flex h-[60px] items-center justify-between border-b border-[#EAEAEA]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,r.jsx)(a.z,{variant:"ghost",className:"h-8 px-1 font-medium text-primary hover:bg-transparent hover:text-primary",children:"推荐"}),(0,r.jsx)(a.z,{variant:"ghost",className:"h-8 px-1 font-medium text-muted-foreground hover:bg-transparent hover:text-foreground",children:"追踪"}),(0,r.jsx)(a.z,{variant:"ghost",className:"h-8 px-1 font-medium text-muted-foreground hover:bg-transparent hover:text-foreground",children:"标签"}),(0,r.jsx)(a.z,{variant:"ghost",className:"h-8 px-1 font-medium text-muted-foreground hover:bg-transparent hover:text-foreground",children:"标签"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(a.z,{variant:"ghost",size:"sm",className:"h-8 space-x-2 text-muted-foreground hover:bg-transparent hover:text-foreground",children:["热门",(0,r.jsx)(c.Z,{className:"h-4 w-4"})]}),(0,r.jsx)(a.z,{variant:"ghost",size:"sm",className:"h-8 text-muted-foreground hover:bg-transparent hover:text-foreground",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]})]})})}),(0,r.jsxs)("div",{className:"mx-auto w-[808px] px-8",children:[(0,r.jsx)("div",{className:"divide-y",children:e.map(e=>(0,r.jsx)("article",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(i.qE,{className:"h-10 w-10 flex-shrink-0",children:(0,r.jsx)(i.Q5,{children:e.user.username[0]})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.title}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,f.Q)(new Date(e.main_post.created_at),{addSuffix:!0,locale:m.U})})]}),(0,r.jsx)("p",{className:"mt-1 text-md text-muted-foreground line-clamp-2",children:e.main_post.content}),(0,r.jsxs)("div",{className:"mt-3 flex items-center space-x-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.votes})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.comment_count})]}),(0,r.jsx)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:(0,r.jsx)("span",{children:e.diff_humans})}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[(0,r.jsxs)("span",{children:["来自 ",e.board.name]})," ",(0,r.jsxs)("span",{children:["#",e.board_child.name]})]})]})]})]})},e.slug))}),s?(0,r.jsx)("div",{className:"py-8 text-center text-muted-foreground",children:"加载中..."}):g?(0,r.jsx)("div",{className:"py-8 text-center",children:(0,r.jsx)(a.z,{variant:"outline",onClick:()=>p(e=>e+1),children:"加载更多"})}):e.length>0?(0,r.jsx)("div",{className:"py-8 text-center text-muted-foreground",children:"没有更多了"}):(0,r.jsx)("div",{className:"py-8 text-center text-muted-foreground",children:"这里空空如也"})]})]})}},5808:function(e,t,s){"use strict";s.d(t,{F$:function(){return o},Q5:function(){return d},qE:function(){return c}});var r=s(7437),n=s(2265),a=s(6694),i=s(2169);let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...n})});c.displayName=a.fC.displayName;let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",s),...n})});o.displayName=a.Ee.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...n})});d.displayName=a.NY.displayName},575:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),n=s(2265),a=s(7256),i=s(6061),c=s(2169);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:d=!1,...l}=e,u=d?a.g7:"button";return(0,r.jsx)(u,{className:(0,c.cn)(o({variant:n,size:i,className:s})),ref:t,...l})});d.displayName="Button"},4971:function(e,t,s){"use strict";s.d(t,{d:function(){return i}});var r=s(2749);class n extends Error{constructor(e,t,s){super(e),this.status=t,this.code=s,this.name="RequestError"}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{auth:s=!0,raw:a=!1,...i}=t,c=e.startsWith("http")?e:"".concat("http://106.55.228.122:8200").concat(e);if(s){let e=await (0,r.getSession)();(null==e?void 0:e.accessToken)&&(i.headers={...i.headers,Authorization:"Bearer ".concat(e.accessToken)})}i.headers={Accept:"application/json",...!(i.body instanceof FormData)&&{"Content-Type":"application/json"},...i.headers};try{let e=await fetch(c,i);if(a)return e;let t=await e.json();if(t.code>0)throw new n("string"==typeof t.message?t.message:JSON.stringify(t.message),e.status,t.code);if(!e.ok)throw new n(t.message||e.statusText,e.status,t.code);if(401===t.code)throw await (0,r.signOut)({redirect:!0}),new n("登录已过期，请重新登录",401);return t}catch(e){if(e instanceof n)throw e;throw new n(e.message)}}let i={get:async(e,t)=>a(e,{method:"GET",...t}),async post(e,t,s){let r={},n=JSON.stringify(t);return t instanceof FormData?n=t:r["Content-Type"]="application/json",a(e,{method:"POST",body:n,headers:r,...s})},put:async(e,t,s)=>a(e,{method:"PUT",body:JSON.stringify(t),...s}),delete:async(e,t)=>a(e,{method:"DELETE",...t})}},2169:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var r=s(7042),n=s(4769);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,r.W)(t))}}},function(e){e.O(0,[461,749,202,971,938,744],function(){return e(e.s=2871)}),_N_E=e.O()}]);
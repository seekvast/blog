(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{5161:function(e,s,r){Promise.resolve().then(r.bind(r,3467))},3467:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return B}});var a=r(7437),t=r(2265),l=r(4033),i=r(2756),n=r(251),c=r(1396),o=r.n(c),d=r(2898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("Globe2",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var x=r(575),m=r(5808),u=r(2169),j=r(2749),p=r(7147),v=r(9208),f=r(2782),g=r(5005);let N=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...t})});N.displayName="Textarea";var y=r(8641);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,d.Z)("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var w=r(4971);function k(e){let{open:s,onOpenChange:r}=e,{data:l}=(0,j.useSession)(),{toast:i}=(0,p.pm)(),[n,c]=(0,t.useState)(!1),[o,d]=(0,t.useState)({name:"",slug:"",desc:"",visibility:0,category_id:1,is_nsfw:0}),h=(e,s)=>{d(r=>({...r,[e]:s}))},m=async e=>{try{let s=new FormData;for(let r of(s.append("image",e),s.append("attachment_type","board_avatars"),console.log("File object:",e),console.log("FormData entries:"),s.entries()))console.log(r[0],r[1]);let r=await w.d.post("/api/upload/image",s);if(0===r.code){let e="".concat(r.data.host).concat(r.data.file_path);return d(s=>({...s,attachment_id:r.data.id,avatar:e})),e}throw Error(r.message||"Upload failed")}catch(e){return console.error("Failed to upload image:",e),i({title:"上传失败",description:e instanceof Error?e.message:"图片上传失败，请重试",variant:"destructive"}),null}},u=async()=>{if(!(null==l?void 0:l.accessToken)){i({variant:"destructive",title:"未登录",description:"请先登录后再创建看板"});return}if(!o.name.trim()){i({variant:"destructive",title:"请输入看板名称"});return}if(!o.slug.trim()){i({variant:"destructive",title:"请输入看板网址"});return}try{c(!0),await w.d.post("/api/board",o),i({title:"创建成功",description:"看板创建成功"}),r(!1)}catch(e){i({variant:"destructive",title:"创建失败",description:e.message||"看板创建失败，请重试"})}finally{c(!1)}};return(0,a.jsx)(v.Vq,{open:s,onOpenChange:r,children:(0,a.jsxs)(v.cZ,{className:"max-w-[480px]",children:[(0,a.jsx)(v.fK,{children:(0,a.jsx)(v.$N,{className:"text-xl font-semibold",children:"建立看板"})}),(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"看板頭像"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",className:"hidden",id:"boardImage",accept:"image/jpeg,image/jpg,image/png,image/gif",onChange:e=>{var s;return m(null===(s=e.target.files)||void 0===s?void 0:s[0])}}),(0,a.jsx)("label",{htmlFor:"boardImage",className:"w-24 h-24 rounded-full bg-neutral-100 flex items-center justify-center cursor-pointer hover:bg-neutral-200 transition-colors",children:o.avatar?(0,a.jsx)("img",{src:o.avatar,alt:"Board avatar",className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)(b,{className:"w-8 h-8 text-neutral-400"})})]}),(0,a.jsx)("div",{className:"text-sm text-neutral-500",children:"照片上傳規格要求：格式為JPG、JPEG、GIF或者png，大小 2MB以內。"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"看板名稱"}),(0,a.jsx)(f.I,{placeholder:"最長15個中文字或相同長度英文字",maxLength:15,value:o.name,onChange:e=>h("name",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"看板網址"}),(0,a.jsx)(f.I,{placeholder:"https://kater.me/community/xxx",value:o.slug,onChange:e=>h("slug",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"看板簡介"}),(0,a.jsx)(N,{placeholder:"請輸入看板簡介",className:"resize-none",rows:4,value:o.desc,onChange:e=>h("desc",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"看板被搜尋"}),(0,a.jsxs)(y.Ph,{value:String(o.visibility),onValueChange:e=>h("visibility",Number(e)),children:[(0,a.jsx)(y.i4,{children:(0,a.jsx)(y.ki,{placeholder:"選擇公開範圍"})}),(0,a.jsxs)(y.Bw,{children:[(0,a.jsx)(y.Ql,{value:"0",children:"公開"}),(0,a.jsx)(y.Ql,{value:"1",children:"私密"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"看板類型"}),(0,a.jsxs)(y.Ph,{value:String(o.category_id),onValueChange:e=>h("category_id",Number(e)),children:[(0,a.jsx)(y.i4,{children:(0,a.jsx)(y.ki,{placeholder:"選擇看板類型"})}),(0,a.jsxs)(y.Bw,{children:[(0,a.jsx)(y.Ql,{value:"1",children:"綜合"}),(0,a.jsx)(y.Ql,{value:"2",children:"科技"}),(0,a.jsx)(y.Ql,{value:"3",children:"生活"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{children:"討論類型"}),(0,a.jsxs)(y.Ph,{value:String(o.is_nsfw),onValueChange:e=>h("is_nsfw",Number(e)),children:[(0,a.jsx)(y.i4,{children:(0,a.jsx)(y.ki,{placeholder:"選擇討論類型"})}),(0,a.jsxs)(y.Bw,{children:[(0,a.jsx)(y.Ql,{value:"0",children:"一般討論"}),(0,a.jsx)(y.Ql,{value:"1",children:"成人内容"})]})]})]})]})]}),(0,a.jsx)(x.z,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:u,disabled:n,children:n?"创建中...":"建立看板"}),(0,a.jsxs)("div",{className:"text-center text-sm text-neutral-500",children:["建立看板的同時，代表您已同意《",(0,a.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"內容政策"}),"》"]})]})})}let _=[{title:"首頁",href:"/",icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-primary",children:[(0,a.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,a.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})},{title:"關注",href:"/",icon:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})},{title:"看板",href:"/boards",icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),(0,a.jsx)("path",{d:"M2 12h20"})]})},{title:"書籤",href:"/",icon:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M19 21l-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})})}];function C(e){let{className:s,...r}=e,i=(0,l.usePathname)(),{t:c,i18n:d}=(0,n.$G)(),[j,p]=(0,t.useState)(!1);return(0,a.jsx)("aside",{className:(0,u.cn)("flex w-full flex-col gap-4 h-full",s),...r,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 pr-4",children:[(0,a.jsx)("nav",{className:"flex flex-col gap-1",children:_.map(e=>{let s=i===e.href;return(0,a.jsxs)(o(),{href:e.href,className:(0,u.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-neutral-500 transition-colors","hover:bg-neutral-100 hover:text-neutral-900",s&&"bg-neutral-100 text-neutral-900"),children:[e.icon,(0,a.jsx)("span",{children:e.title})]},e.href)})}),(0,a.jsx)(x.z,{className:"my-4 w-full",size:"lg",onClick:()=>p(!0),children:c(i.startsWith("/boards")?"common.createBoard":"common.createDiscussion")}),(0,a.jsx)(k,{open:j,onOpenChange:p}),(0,a.jsxs)("div",{className:"my-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"推薦看板"}),(0,a.jsx)(x.z,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),(0,a.jsx)("path",{d:"M21 3v5h-5"}),(0,a.jsx)("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),(0,a.jsx)("path",{d:"M8 16H3v5"})]})})]}),(0,a.jsx)("div",{className:"border-y py-3 space-y-1",children:[{name:"FTTT",members:1,letter:"F"},{name:"NSFW",members:12922,letter:"N",tag:"成人"},{name:"TFF11",members:1,letter:"T"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg px-2 py-2 hover:bg-accent",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.qE,{className:"h-8 w-8",children:(0,a.jsx)(m.Q5,{children:e.letter})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o(),{href:"/boards/".concat(e.name),className:"text-sm font-medium",children:e.name}),e.tag&&(0,a.jsx)("span",{className:"rounded bg-red-500 px-1 py-0.5 text-[10px] text-white",children:e.tag})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,a.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,a.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,a.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,a.jsx)("span",{children:e.members})]})]})]}),(0,a.jsx)(x.z,{size:"sm",className:"rounded-full",children:"加入"})]},e.name))})]}),(0,a.jsxs)("div",{className:"mt-auto space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[(0,a.jsx)(o(),{href:"#",className:"hover:text-foreground",children:c("common.termsOfService")}),(0,a.jsx)(o(),{href:"#",className:"hover:text-foreground",children:c("common.privacyPolicy")}),(0,a.jsx)(o(),{href:"#",className:"hover:text-foreground",children:c("common.contactUs")}),(0,a.jsx)(o(),{href:"#",className:"hover:text-foreground",children:c("common.helpCenter")})]}),(0,a.jsx)("div",{className:"flex items-center text-sm text-muted-foreground",children:(0,a.jsxs)("div",{role:"button",onClick:()=>{let e=d.language;d.changeLanguage("zh-TW"===e?"en":"zh-TW")},className:"flex items-center gap-2 hover:text-foreground",children:[(0,a.jsx)(h,{className:"ml-auto h-4 w-4"}),(0,a.jsx)("span",{children:c("common.autoDetectLanguage")})]})})]})]})})}var L=r(6691),z=r.n(L);function M(e){let{className:s,...r}=e,{data:t}=(0,j.useSession)();return(0,a.jsxs)("aside",{className:(0,u.cn)("sticky top-14 flex-shrink-0",s),...r,children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("h3",{className:"text-sm font-medium pb-2 px-2 border-b",children:"精品专题"}),(0,a.jsxs)("div",{className:" space-y-2 py-2 px-2",children:[(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"发点色图"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"老司机的操作"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"XXX交流"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"小阿喵思考lsajbsan爱上"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"阿喵思考会聊妳聊妳聊阿森纳说"})]}),(0,a.jsx)(x.z,{variant:"outline",size:"sm",className:"my-2 w-full",children:"更多专题"})]}),(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 px-2 border-b",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"相关文章"}),(0,a.jsx)(x.z,{variant:"ghost",size:"sm",className:"h-auto p-0 text-xs font-normal text-muted-foreground hover:text-foreground",children:"换一换"})]}),(0,a.jsxs)("div",{className:"space-y-2 py-2 px-2",children:[(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"最近翻译了，大家要小心不要"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"预览救命啊！公司服务器升级"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"北美性价比最高的杜甫"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"预览刚遇到一个怪事"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"不懂就问：美国商务部禁止"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"那扇局面已经控制不住了，"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"T楼送碑名"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"煮了7個新米,新玩具"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"「郭家軍」被禁黑"}),(0,a.jsx)(o(),{href:"#",className:"block text-sm hover:text-primary",children:"敏感羅莉娘性感精油按摩"})]})]}),(0,a.jsx)("div",{className:"relative aspect-[3/4] w-full overflow-hidden",children:(0,a.jsx)(z(),{src:"/ad.jpg",alt:"Advertisement",fill:!0,className:"object-cover"})})]})}function B(e){let{children:s}=e,r=!(0,l.usePathname)().startsWith("/boards");return(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(i.h,{}),(0,a.jsx)("div",{className:"mx-auto flex justify-center pt-8",children:(0,a.jsxs)("div",{className:"w-[1360px] flex justify-between px-4 relative",children:[(0,a.jsx)("div",{className:"sticky top-[88px] min-w-[300px] h-[calc(100vh-88px)]",children:(0,a.jsx)(C,{className:"hidden lg:block"})}),(0,a.jsx)("main",{className:"w-full",children:s}),r&&(0,a.jsx)(M,{className:"hidden lg:block mt-8"})]})})]})}}},function(e){e.O(0,[461,749,646,440,423,316,691,756,971,938,744],function(){return e(e.s=5161)}),_N_E=e.O()}]);
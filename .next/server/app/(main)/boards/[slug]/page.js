(()=>{var e={};e.id=680,e.ids=[680],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12212:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var r=t(50482),a=t(69108),i=t(62563),n=t.n(i),l=t(68300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["(main)",{children:["boards",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,90795)),"/var/www/forum-system-temp/src/app/(main)/boards/[slug]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,84968)),"/var/www/forum-system-temp/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,21342)),"/var/www/forum-system-temp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],o=["/var/www/forum-system-temp/src/app/(main)/boards/[slug]/page.tsx"],x="/(main)/boards/[slug]/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/boards/[slug]/page",pathname:"/boards/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6658:(e,s,t)=>{Promise.resolve().then(t.bind(t,52591))},51354:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},42739:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},38852:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},62093:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},52591:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(95344),a=t(3729),i=t(22254),n=t(9758),l=t(42739),c=t(25390),d=t(62093),o=t(51354),x=t(38852),m=t(14871),u=t(5094),h=t(19591),p=t(25173);function f(){let e=(0,i.useParams)(),[s,t]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),[v,j]=(0,a.useState)([]),[y,N]=(0,a.useState)(!0),[b,w]=(0,a.useState)(1),[_,z]=(0,a.useState)(1),[k,P]=(0,a.useState)([]),[Z,q]=(0,a.useState)(null),{t:E}=(0,n.$G)();(0,a.useEffect)(()=>{e.slug&&$()},[e.slug]),(0,a.useEffect)(()=>{f?.id&&S()},[f?.id]),(0,a.useEffect)(()=>{f?.id&&C()},[f?.id,Z]);let $=async()=>{try{t(!0);let s=await p.d.get(`/api/board?slug=${e.slug}`);0===s.code&&g(s.data)}catch(e){console.error("Failed to fetch board detail:",e)}finally{t(!1)}},C=async(e=1)=>{try{if(N(!0),!f?.id)return;let s=await p.d.get(`/api/discussions?board_id=${f.id}&page=${e}&per_page=10&board_child_id=${Z||""}`);0===s.code&&(j(t=>1===e?s.data.items:[...t,...s.data.items]),w(s.data.current_page),z(s.data.last_page))}catch(e){console.error("Failed to fetch discussions:",e)}finally{N(!1)}},S=async()=>{try{if(!f?.id)return;let e=await p.d.get(`/api/board/children?board_id=${f.id}`);0===e.code&&P(e.data.items)}catch(e){console.error("Failed to fetch board children:",e)}};return s?r.jsx("div",{className:"flex h-[calc(100vh-60px)] items-center justify-center",children:r.jsx(l.Z,{className:"h-8 w-8 animate-spin text-primary"})}):f?(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("div",{className:"bg-white",children:r.jsx("div",{className:"mx-auto w-full px-8",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3 pb-4",children:[(0,r.jsxs)(m.qE,{className:"h-12 w-12 rounded-lg",children:[r.jsx(m.F$,{src:f.avatar,alt:f.name}),r.jsx(m.Q5,{children:f.name[0]})]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h1",{className:"text-lg font-medium",children:f.name}),1===f.is_nsfw&&r.jsx(h.C,{variant:"secondary",className:"bg-red-50 text-red-600",children:"成人"})]}),(0,r.jsxs)(u.z,{variant:"outline",size:"sm",className:"space-x-1",children:["已加入",r.jsx(c.Z,{className:"h-4 w-4"})]})]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:[1===f.visibility?"私密":"公开"," \xb7"," ",f.category?.name]}),r.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:f.desc})]})]})})}),r.jsx("div",{className:"bg-white",children:(0,r.jsxs)("div",{className:"mx-auto w-full px-8",children:[(0,r.jsxs)("div",{className:"flex h-[60px] items-center justify-between border-b border-[#EAEAEA]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[r.jsx(u.z,{variant:"ghost",className:"h-8 px-1 font-medium text-primary hover:bg-transparent hover:text-primary",children:"文章"}),r.jsx(u.z,{variant:"ghost",className:"h-8 px-1 font-medium text-muted-foreground hover:bg-transparent hover:text-foreground",children:"规则"}),r.jsx(u.z,{variant:"ghost",className:"h-8 px-1 font-medium text-muted-foreground hover:bg-transparent hover:text-foreground",children:"子版"}),r.jsx(u.z,{variant:"ghost",className:"h-8 px-1 font-medium text-muted-foreground hover:bg-transparent hover:text-foreground",children:"讨论"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(u.z,{variant:"ghost",size:"sm",className:"h-8 space-x-2 text-muted-foreground hover:bg-transparent hover:text-foreground",children:["热门",r.jsx(c.Z,{className:"h-4 w-4"})]}),r.jsx(u.z,{variant:"ghost",size:"sm",className:"h-8 space-x-2 text-muted-foreground hover:bg-transparent hover:text-foreground",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-list",children:[r.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),r.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),r.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),r.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),r.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),r.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 py-3 text-sm",children:[r.jsx(u.z,{variant:Z?"ghost":"default",size:"sm",className:`rounded-full ${Z?"text-muted-foreground":"text-white"}`,onClick:()=>q(null),children:"全部"}),k.map(e=>r.jsx(u.z,{variant:Z===e.id?"default":"ghost",size:"sm",className:`rounded-full ${Z===e.id?"text-white":"text-muted-foreground"}`,onClick:()=>q(e.id),children:e.name},e.id))]})]})}),(0,r.jsxs)("div",{className:"mx-auto w-full px-8",children:[r.jsx("div",{className:"space-y-4 py-4",children:y?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(l.Z,{className:"h-8 w-8 animate-spin text-primary"})}):0===v.length?r.jsx("div",{className:"flex justify-center py-8 text-muted-foreground",children:"這裡空空如也"}):v.map(e=>r.jsx("div",{className:"py-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)(m.qE,{className:"h-10 w-10 rounded-lg",children:[r.jsx(m.F$,{src:e.user.avatar_url}),r.jsx(m.Q5,{children:e.user.username[0]})]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"mb-1",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium",children:e.title}),1===e.is_private&&r.jsx(h.C,{variant:"secondary",children:"私密"}),1===e.is_sticky&&r.jsx(h.C,{variant:"secondary",className:"bg-blue-50 text-blue-600",children:"置顶"})]}),r.jsx(u.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(d.Z,{className:"h-4 w-4"})})]})}),r.jsx("div",{children:r.jsx("p",{className:"mt-1 text-md text-muted-foreground line-clamp-2",children:e.main_post.content})}),(0,r.jsxs)("div",{className:"mt-3 flex items-center space-x-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{children:e.votes})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[r.jsx(x.Z,{className:"h-4 w-4"}),r.jsx("span",{children:e.comment_count})]}),r.jsx("div",{className:"flex items-center space-x-1 text-muted-foreground",children:r.jsx("span",{children:e.diff_humans})}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[(0,r.jsxs)("span",{children:["来自 ",e.board.name]})," ",(0,r.jsxs)("span",{children:["#",e.board_child.name]})]})]})]})]})},e.first_post_id))}),!y&&b<_&&r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(u.z,{variant:"outline",onClick:()=>{b<_&&C(b+1)},className:"w-[200px]",children:"加載更多"})})]})]}):r.jsx("div",{className:"flex h-[calc(100vh-60px)] items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"看板不存在"})})}},19591:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var r=t(95344);t(3729);var a=t(49247),i=t(11453);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return r.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},90795:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,t(86843).createProxy)(String.raw`/var/www/forum-system-temp/src/app/(main)/boards/[slug]/page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[225,591,581,65,582,880],()=>t(12212));module.exports=r})();